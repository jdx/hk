import "../Builtins.pkl"
import "../Config.pkl"
import "./test/helpers.pkl"

@Builtins.meta {
  category = "Data Formats"
  description = "TOML linter"
}
taplo = new Config.Step {
  glob = "**/*.toml"
  check = "taplo lint {{ files }}"
  tests {
    ...new helpers.Check {
      filename = "test.toml"
      bad = "[table]\nkey = 0\nkey = 1\n"
      // NB: Formatting is bad, but `lint` doesn't check formatting
      good = "[table]\nkey   =   0\n"
    }.suite
  }
}
